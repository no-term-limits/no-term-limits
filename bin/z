#!/usr/bin/env bash

function error_handler() {
  >&2 echo "Exited with BAD EXIT CODE '${2}' in ${0} script at line: ${1}."
  exit "$2"
}
trap 'error_handler ${LINENO} $?' ERR
set -o errtrace -o errexit -o nounset -o pipefail

custom_configs="${HOME}/.config/zellij/custom.kdl"
if [[ -f "${custom_configs}" ]]; then
  export ZELLIJ_CONFIG_FILE="$custom_configs"
fi

if [[ "${1:-}" == "--trash-old-sessions" ]]; then
  zellij ka -y || echo ''
  zellij da -y || echo ''
fi

zellij -l "${HOME}/.config/zellij/layouts/custom_layout.hdl" attach --create pair
